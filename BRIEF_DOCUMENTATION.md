Note: If you are not familiar with Android app developement, I suggest searching "how do Android apps work" or browsing [this](https://developer.android.com/guide).
# Classes

---

## Counter.java

*implements Serializable*<br><br>
Its instances represent the actual counters.
See [Counter.java](https://github.com/AttiliaTheHun/DayCounter/blob/master/app/src/main/java/attilathehun/daycounter/CreateCounterActivity.java),
[Serializable](https://docs.oracle.com/javase/7/docs/api/java/io/Serializable.html).

### Public constructors

This class has no public constructors, use `Counter#create()` instead.

### public int getDaysRemaining()

Returns the number of the days left by substracting current date from the target one. If you want to create a display string, it is advised to use `Util.getDaysRemaining()` instead.
### public static void refresh()
Refreshes the [Calendar](https://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html) instance, for the calendar is static
and when midnight passes, it still uses data for the old day.
### public static Counter create(String id, String name, int targetDay, int targetMonth, int targetYear, int targetAge)
Used to create instances instead of constructors.
### public String getDateString()
Stringifies the data of the Counter in a predefined format DD/MM/YYYY (age).
### public static void addEventListener(CounterEventListener listener)
Registers a listener for counter events.
### public static List<CounterEventListener> getEventListeners()
Returns the counter event listeners list.

---

## CounterManager.java

Manages the counter collection.
### Public constructors
This is a singleton class, use `CounterManager#getInstance()` to access the instance.
### public boolean addCounter(String name, int targetDay, int targetMonth, int targetYear, int targetAge)
Adds a counter to the collection. Returns true on success, false on fail (arguments).
### public void deleteCounter(String id)
Removes counter from the collection.
### public void save()
Saves the counters into internal storage using JSON.
### public void load()
Loads the counters from internal storage using JSON.
### public static CounterManager getInstance()
Returns the manager instance.
### public Counter getCounterOfId(String id)
Returns the counter of the corresponding id or null.
### public ArrayList<Counter> getNotificationCounters()
Returns a list of counters with positive notification status.
### public ArrayList<Counter> getWidgetCounters()
Returns a list of counters that are bound to a widget.
### public ArrayList<Counter> getCounters()
Returns the counter collection.
### public void clearCounters()
Wipes the counter collection.

---

## MainActivity.java, CreateCounterActivity.java, SettingsActivity.java
*extends AppCompatActivity*<br><br>
Android activities running the screens we see when using the app. See
[MainActivity.java](https://github.com/AttiliaTheHun/DayCounter/blob/master/app/src/main/java/attilathehun/daycounter/MainActivity.java),
[CreateCounterActivity.java](https://github.com/AttiliaTheHun/DayCounter/blob/master/app/src/main/java/attilathehun/daycounter/CreateCounterActivity.java),
[SettingsActivity.java](https://github.com/AttiliaTheHun/DayCounter/blob/master/app/src/main/java/attilathehun/daycounter/SettingsActivity.java),
[Activity](https://developer.android.com/reference/android/app/Activity),
[Introduction to activities](https://developer.android.com/guide/components/activities/intro-activities)

---

## FileUtil.java, SketchwareUtil.java
Sketchware's util classes. I wanted to alter `FileUtil` to implement some custom methods, but the changes were never persistent, so I could not use them.
These files are pregenerated by Sketchware itself and are used within Sketchware-generated code and some of my code, too. See
[FileUtil.java](https://github.com/AttiliaTheHun/DayCounter/blob/master/app/src/main/java/attilathehun/daycounter/FileUtil.java),
[SketchwareUtil.java](https://github.com/AttiliaTheHun/DayCounter/blob/master/app/src/main/java/attilathehun/daycounter/SketchwareUtil.java).

---

## SketchApplication.java
*extends Application*<br><br>
The Application subclass, pregenerated by Sketchware. See [Application]().

---

## NotificationService.java
*extends Service implements DateChangedListener, CounterEventListener, LocaleChangedListener*<br><br>
Creates and runs the notifications.
See [NotificationService.java](https://github.com/AttiliaTheHun/DayCounter/blob/master/app/src/main/java/attilathehun/daycounter/NotificationService.java),
[Service](https://developer.android.com/reference/android/app/Service),
[DateChangedListener.java](https://github.com/AttiliaTheHun/DayCounter/blob/master/app/src/main/java/attilathehun/daycounter/DateChangedListener.java),
[LocaleChangedListener.java](https://github.com/AttiliaTheHun/DayCounter/blob/master/app/src/main/java/attilathehun/daycounter/LocaleChangedListener.java),
[CounterEventListener.java](https://github.com/AttiliaTheHun/DayCounter/blob/master/app/src/main/java/attilathehun/daycounter/CounterEventListener.java).
### public static void createNotificationChannel()
Notification channel is what the notifications are registered under in the app's system settings page. Since Android {idk the exact version}, the user has the ability to choose
which notifications to allow and which to block. The notification won't appear if it is not bound to a `NotificationChannel`.
See [Create and Manage Notification Channels](https://developer.android.com/training/notify-user/channels),
[NotificationChannel](https://developer.android.com/reference/android/app/NotificationChannel)
### public void registerReceiver()
Registers [ServiceLauncher.java](https://github.com/AttiliaTheHun/DayCounter/blob/master/app/src/main/java/attilathehun/daycounter/ServiceLauncher)
as a [BroadcastReceiver](https://developer.android.com/reference/android/content/BroadcastReceiver),
making it hear the broadcasts. Since the `NotificationService` is running all the time, so will the receiver. See
[Broadcast overview](https://developer.android.com/guide/components/broadcasts).
### public void registerListener()
Adds `NotificationService` on the list of `DateChangedListener` implementors, happenning it to be notified when the date changes.
See [DateChangedListener.java](https://github.com/AttiliaTheHun/DayCounter/blob/master/app/src/main/java/attilathehun/daycounter/DateChangedListener.java).
### createNotifications()
Creates the notifications for the counters.
### public void ropeIsTheWayPleaseHelpMe()
This method does what a `removeNotification()` method would do. It removes a notification. The problem is that one notification has to alwaysbe around, because such are the rules for [foreground services](https://developer.android.com/guide/components/foreground-services). Thus we need to check this scenario and eventually recreate some other notification as the service indicator. 

---

## ServiceLauncher.java
*extends BroadcastReceiver*<br><br>
Listens for broadcasts and upon interception notifies all the [DateChangedListener.java](https://github.com/AttiliaTheHun/DayCounter/blob/master/app/src/main/java/attilathehun/daycounter/DateChangedListener.java) implementors
to refresh their stuff. It also starts the [NotificationService.java](https://github.com/AttiliaTheHun/DayCounter/blob/master/app/src/main/java/attilathehun/daycounter/NotificationService.java)
upon boot. See [ServiceLauncher.java](https://github.com/AttiliaTheHun/DayCounter/blob/master/app/src/main/java/attilathehun/daycounter/ServiceLauncher.java),
[BroadcastReceiver](https://developer.android.com/reference/android/content/BroadcastReceiver).
### public static void addDateChangedListener(DateChangedListener listener) 
### public static void addLocaleChangedListener(LocaleChangedListener listener)

---

## Util.java
A collection of handy methods to simplify tasks in other modules. See  [Util.java](https://github.com/AttiliaTheHun/DayCounter/blob/master/app/src/main/java/attilathehun/daycounter/Util.java).
### public static void setContextIfNull(Context context)
Sets the default context for contextless methods. Tries to avoid memory leaks as much as possible. See [Context](https://developer.android.com/reference/android/content/Context).
### public static Context getContext()
Returns the stored context (can be null).
### public static void startService()
Starts the  [NotificationService.java](https://github.com/AttiliaTheHun/DayCounter/blob/master/app/src/main/java/attilathehun/daycounter/NotificationService.java).
### public static String getDaysRemaining(Counter counter, Context context)
Creates a translated output string for the counter.
###  public static void refreshWidgets(Context context)
Refreshes all the widgets
### public static void stopService(Context context)
Stops the notification service. (Shuts all notifications).

---

## Widget(Light)Activity.java
*extends Activity*<br><br>
The widget setup activity. See  [WidgetActivity.java](https://github.com/AttiliaTheHun/DayCounter/blob/master/app/src/main/java/attilathehun/daycounter/WidgetActivity.java),
[WidgetLightActivity.java](https://github.com/AttiliaTheHun/DayCounter/blob/master/app/src/main/java/attilathehun/daycounter/WidgetLightActivity.java),
[App widgets overview](https://developer.android.com/guide/topics/appwidgets/overview),
[Create a simple widget](https://developer.android.com/guide/topics/appwidgets),
[Activity](https://developer.android.com/reference/android/app/Activity).

---

## Widget(Light)Provider.java

*extends AppWidgetProvider implements CounterEventListener*<br><br>
The backend behind our app widgets. Handles the logic, the content, etc. See [WidgetProvider.java](https://github.com/AttiliaTheHun/DayCounter/blob/master/app/src/main/java/attilathehun/daycounter/WidgetProvider.java),
[WidgetLightProvider.java](https://github.com/AttiliaTheHun/DayCounter/blob/master/app/src/main/java/attilathehun/daycounter/WidgetLightProvider.java),
[AppWidgetProvider](https://developer.android.com/reference/android/appwidget/AppWidgetProvider).
### public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds)
Override from `AppWidgetProvider`. Is called when the `ACTION_APPWIDGET_UPDATE` broadcast is received. Updates the widgets
### public void updateAppWidget(Context context, AppWidgetManager appWidgetManager, int appWidgetId)
Updates the content of the widget, making sure the remaining days count is up to date or that widgets do not show data of a deleted counter.
### public static void refresh(Context context)
Manually refreshes all the (light) widgets.

---

# Interfaces

---

## CounterEventListener.java
An interface to provide a communication channel between components, that need to update when there are changes to the counters.
See [CounterEventListener.java](https://github.com/AttiliaTheHun/DayCounter/blob/master/app/src/main/java/attilathehun/daycounter/CounterEventListener.java)
### Implemented by:
- [NotificationService.java](https://github.com/AttiliaTheHun/DayCounter/blob/master/app/src/main/java/attilathehun/daycounter/WidgetProvider.java)
- [WidgetProvider.java](https://github.com/AttiliaTheHun/DayCounter/blob/master/app/src/main/java/attilathehun/daycounter/WidgetLightProvider.java)
- [WidgetLightProvider.java](https://github.com/AttiliaTheHun/DayCounter/blob/master/app/src/main/java/attilathehun/daycounter/NotificationService.java)
### public void onCounterDeleted(Counter counter)
Notifies the implementors that a counter has been deleted and provides access to the former counter's data.
### public void onCounterNotificationStateChanged(Counter counter)
Notifies the implementors that a counter's notification state has changed and provides access to the counter's data.
### public void onCounterEdited(Counter counter)
Notifies the implementors that a counter's data has been edited and provides access to the counter's data.

---

## DateChangedListener.java
An interface to provide a communication channel between components, that need to update when the date of the world changes.
See [DateChangedListener.java](https://github.com/AttiliaTheHun/DayCounter/blob/master/app/src/main/java/attilathehun/daycounter/DateChangedListener.java)
### Implemented by:
- [NotificationService.java](https://github.com/AttiliaTheHun/DayCounter/blob/master/app/src/main/java/attilathehun/daycounter/NotificationService.java)
- [WidgetProvider.java](https://github.com/AttiliaTheHun/DayCounter/blob/master/app/src/main/java/attilathehun/daycounter/WidgetLightProvider.java)
- [WidgetLightProvider.java](https://github.com/AttiliaTheHun/DayCounter/blob/master/app/src/main/java/attilathehun/daycounter/NotificationService.java)
### public void onDateChanged(Counter counter)
The method to be implemented by the implementors and called when necessary (when date changes).

---

## LocaleChangedListener.java
An interface to provide a communication channel between components, that need to update when the system locale (language√∫ has been changed), usually UI components.
See [LocaleChangedListener.java](https://github.com/AttiliaTheHun/DayCounter/blob/master/app/src/main/java/attilathehun/daycounter/LocaleChangedListener.java)
### Implemented by:
- [NotificationService.java](https://github.com/AttiliaTheHun/DayCounter/blob/master/app/src/main/java/attilathehun/daycounter/NotificationService.java)
- [WidgetProvider.java](https://github.com/AttiliaTheHun/DayCounter/blob/master/app/src/main/java/attilathehun/daycounter/WidgetLightProvider.java)
- [WidgetLightProvider.java](https://github.com/AttiliaTheHun/DayCounter/blob/master/app/src/main/java/attilathehun/daycounter/NotificationService.java)
### public void onLocaleChanged(Counter counter)
The method to be implemented by the implementors and called when necessary (when locale changes).




